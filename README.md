# Three.jså®ç°è„¸ä¹¦å…ƒå®‡å®™3DåŠ¨æ€Logo

![banner](./assets/images/banner.png)

## èƒŒæ™¯

`Facebook` è¿‘æœŸå°†å…¶æ¯å…¬å¸æ”¹åä¸º `Meta`ï¼Œå®£å¸ƒæ­£å¼å¼€å§‹è¿›å†› `å…ƒå®‡å®™ ğŸª`é¢†åŸŸã€‚æœ¬æ–‡ä¸»è¦è®²è¿°é€šè¿‡ `Three.js` + `Blender` æŠ€æœ¯æ ˆï¼Œå®ç° `Meta` å…¬å¸ç‚«é…·çš„ `3D` åŠ¨æ€ `Logo`ï¼Œå†…å®¹åŒ…æ‹¬åŸºç¡€æ¨¡å‹åœ†ç¯ã€ç¯é¢æ‰­ç»“ã€ç®¡é“åŠæ¨¡å‹ç”Ÿæˆã€æ¨¡å‹åŠ è½½ã€æ·»åŠ åŠ¨ç”»ã€æ·»åŠ ç‚¹å‡»äº‹ä»¶ã€æ›´æ¢æè´¨ç­‰ã€‚

### ä»€ä¹ˆæ˜¯å…ƒå®‡å®™

**å…ƒå®‡å®™ Metaverse** ä¸€è¯æºäº `1992` å¹´å°¼å°”Â·æ–¯è’‚èŠ¬æ£®çš„ `ã€Šé›ªå´©ã€‹`ï¼Œè¯¥ä¹¦æè¿°äº†ä¸€ä¸ªå¹³è¡Œäºç°å®ä¸–ç•Œçš„è™šæ‹Ÿä¸–ç•Œ `Metaverse`ï¼Œæ‰€æœ‰ç°å®ç”Ÿæ´»ä¸­çš„äººéƒ½æœ‰ä¸€ä¸ªç½‘ç»œåˆ†èº« `Avatar`ã€‚`ç»´åŸºç™¾ç§‘` å¯¹å…ƒå®‡å®™çš„æè¿°æ˜¯ï¼š**é€šè¿‡è™šæ‹Ÿå¢å¼ºçš„ç‰©ç†ç°å®ï¼Œå‘ˆç°æ”¶æ•›æ€§å’Œç‰©ç†æŒä¹…æ€§ç‰¹å¾çš„ï¼ŒåŸºäºæœªæ¥äº’è”ç½‘ï¼Œå…·æœ‰é“¾æ¥æ„ŸçŸ¥å’Œå…±äº«ç‰¹å¾çš„ `3D` è™šæ‹Ÿç©ºé—´**ã€‚

![zack](./assets/images/zack.gif)

> **å…ƒå®‡å®™**çš„å†…æ¶µæ˜¯å¸çº³äº†ä¿¡æ¯é©å‘½ `5G/6G`ã€äº’è”ç½‘é©å‘½ `web3.0`ã€äººå·¥æ™ºèƒ½é©å‘½ï¼Œä»¥åŠ `VR`ã€`AR`ã€`MR`ï¼Œç‰¹åˆ«æ˜¯æ¸¸æˆå¼•æ“åœ¨å†…çš„è™šæ‹Ÿç°å®æŠ€æœ¯é©å‘½çš„æˆæœï¼Œå‘äººç±»å±•ç°å‡ºæ„å»ºä¸ä¼ ç»Ÿç‰©ç†ä¸–ç•Œå¹³è¡Œçš„å…¨æ¯æ•°å­—ä¸–ç•Œçš„å¯èƒ½æ€§ï¼›å¼•å‘äº†ä¿¡æ¯ç§‘å­¦ã€é‡å­ç§‘å­¦ï¼Œæ•°å­¦å’Œç”Ÿå‘½ç§‘å­¦çš„äº’åŠ¨ï¼Œæ”¹å˜ç§‘å­¦èŒƒå¼ï¼›æ¨åŠ¨äº†ä¼ ç»Ÿçš„å“²å­¦ã€ç¤¾ä¼šå­¦ç”šè‡³äººæ–‡ç§‘å­¦ä½“ç³»çš„çªç ´ï¼›å›Šæ‹¬äº†æ‰€æœ‰çš„æ•°å­—æŠ€æœ¯ã€‚æ­£å¦‚ç”µå½± `ã€Šå¤´å·ç©å®¶ã€‹` çš„åœºæ™¯ï¼Œ**åœ¨æœªæ¥æŸä¸€å¤©ï¼Œäººä»¬å¯ä»¥éšæ—¶éšåœ°åˆ‡æ¢èº«ä»½ï¼Œè‡ªç”±ç©¿æ¢­äºç‰©ç†ä¸–ç•Œå’Œæ•°å­—ä¸–ç•Œï¼Œåœ¨è™šæ‹Ÿç©ºé—´å’Œæ—¶é—´èŠ‚ç‚¹æ‰€æ„æˆçš„å…ƒå®‡å®™ä¸­ç”Ÿæ´»å­¦ä¹ **ã€‚

## å®ç°æ•ˆæœ

è¿›å…¥æ­£é¢˜ï¼Œå…ˆæ¥çœ‹çœ‹æœ¬æ–‡ç¤ºä¾‹çš„å®ç°æ•ˆæœã€‚

![preview](./assets/images/preview.gif)

> `ğŸ”—` åœ¨çº¿é¢„è§ˆï¼š[https://dragonir.github.io/3d-meta-logo](https://dragonir.github.io/3d-meta-logo/)  ï¼ˆç”±äºæ¨¡å‹è¾ƒå¤§ï¼ŒåŠ è½½è¿›åº¦å¯èƒ½æ¯”è¾ƒç¼“æ…¢ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ï¼‰

## å¼€å‘å®ç°

> `ğŸ“Œ` æ³¨æ„ï¼šä¸Šè¿°ç¤ºä¾‹åŠ¨å›¾å±•ç¤ºçš„æ˜¯**è¯•ç‚¼å››**ï¼Œä¸æƒ³çœ‹è¯•é”™è¿‡ç¨‹ï¼ˆè¯•ç‚¼ä¸€ã€è¯•ç‚¼äºŒã€è¯•ç‚¼ä¸‰ï¼‰çš„ï¼Œå¯ç›´æ¥è·³è½¬åˆ°**è¯•ç‚¼å››**æ®µè½æŸ¥çœ‹è¯¦ç»†å®ç°æµç¨‹ã€‚å¤±è´¥æµç¨‹ä¸­éƒ½åˆ—å‡ºäº†éš¾ç‚¹ï¼ŒçŸ¥é“è§£å†³æ–¹æ¡ˆçš„å¤§ä½¬è¯·åœ¨è¯„è®ºåŒºä¸åèµæ•™ã€‚

![logo](./assets/images/logo.png)

å¼€å‘ä¹‹å‰æˆ‘ä»¬å…ˆè§‚å¯Ÿä¸€ä¸‹ `Meta Logo`ï¼Œå¯ä»¥å‘ç°å®ƒæ˜¯ä¸€ä¸ª**åœ†ç¯ç»è¿‡å¯¹æŠ˜æ‰­æ›²å½¢æˆçš„**ï¼Œå› æ­¤å®ç°å®ƒçš„æ—¶å€™å¯ä»¥ä»å®ç°åœ†ç¯å¼€å§‹ã€‚

### è¯•ç‚¼ä¸€ï¼šTHREE.TorusGeometry

`Three.js` æä¾›çš„åŸºç¡€å‡ ä½•ä½“ `THREE.TorusGeometry`ï¼ˆåœ†ç¯ï¼‰ï¼Œå®ƒæ˜¯ä¸€ç§çœ‹èµ·æ¥åƒç”œç”œåœˆ `ğŸ©` çš„ç®€å•å›¾å½¢ã€‚ä¸»è¦å‚æ•°ï¼š

* `radius`ï¼šå¯é€‰ã€‚å®šä¹‰åœ†ç¯çš„åŠå¾„å°ºå¯¸ã€‚é»˜è®¤å€¼æ˜¯ `1`ã€‚
* `tube`ï¼šå¯é€‰ã€‚å®šä¹‰åœ†ç¯çš„ç®¡å­åŠå¾„ã€‚é»˜è®¤å€¼æ˜¯ `0.4`ã€‚
* `radialSegments`ï¼šå¯é€‰ã€‚å®šä¹‰åœ†ç¯é•¿åº¦æ–¹å‘ä¸Šçš„åˆ†æ®µæ•°ã€‚é»˜è®¤å€¼æ˜¯ `8`ã€‚
* `tubularSegments`ï¼šå¯é€‰ã€‚å®šä¹‰åœ†ç¯å®½åº¦æ–¹å‘ä¸Šçš„åˆ†æ®µæ•°ã€‚é»˜è®¤å€¼æ˜¯ `6`ã€‚
* `arc`ï¼šå¯é€‰ã€‚å®šä¹‰åœ†ç¯ç»˜åˆ¶çš„é•¿åº¦ã€‚å–å€¼èŒƒå›´æ˜¯ `0` åˆ° `2 * Ï€`ã€‚é»˜è®¤å€¼æ˜¯ `2 * Ï€`ï¼ˆä¸€ä¸ªå®Œæ•´çš„åœ†ï¼‰ã€‚

è¯­æ³•ç¤ºä¾‹ï¼š

```js
THREE.TorusGeometry(radius, tube, radialSegments, tubularSegments, arc);
```

> `ğŸ˜­ å¤±è´¥`ï¼šæ²¡æœ‰æ‰¾åˆ°æ‰­æ›²åœ†ç¯çš„æ–¹æ³•ã€‚

![preview_1](./assets/images/preview_1.png)

### è¯•ç‚¼äºŒï¼šTHREE.TorusKnotGeometry

`THREE.TorusKnotGeometry` å¯ä»¥ç”¨æ¥åˆ›å»ºä¸‰ç»´ç¯é¢æ‰­ç»“ï¼Œç¯é¢æ‰­ç»“æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹åˆ«çš„ç»“ï¼Œçœ‹ä¸Šå»åƒä¸€æ ¹ç®¡å­ç»•ç€å®ƒè‡ªå·±æ—‹è½¬äº†å‡ åœˆã€‚ä¸»è¦å‚æ•°ï¼š

* `radius`ï¼šå¯é€‰ã€‚è®¾ç½®å®Œæ•´åœ†ç¯çš„åŠå¾„ï¼Œé»˜è®¤å€¼æ˜¯ `1`ã€‚
* `tube`ï¼šå¯é€‰ã€‚è®¾ç½®ç®¡é“çš„åŠå¾„ï¼Œé»˜è®¤å€¼æ˜¯ `0.4`ã€‚
* `radialSegments`ï¼šå¯é€‰ã€‚æŒ‡å®šç®¡é“æˆªé¢çš„åˆ†æ®µæ•°ï¼Œæ®µæ•°è¶Šå¤šï¼Œç®¡é“æˆªé¢åœ†è¶Šå…‰æ»‘ï¼Œé»˜è®¤å€¼æ˜¯ `8`ã€‚
* `tubularSegments`ï¼šå¯é€‰ã€‚æŒ‡å®šç®¡é“çš„åˆ†æ®µæ•°ï¼Œæ®µæ•°è¶Šå¤šï¼Œç®¡é“è¶Šå…‰æ»‘ï¼Œé»˜è®¤å€¼æ˜¯ `64`ã€‚
* `p`ï¼šå¯é€‰ã€‚å†³å®šå‡ ä½•ä½“å°†ç»•ç€å…¶æ—‹è½¬å¯¹ç§°è½´æ—‹è½¬å¤šå°‘æ¬¡ï¼Œé»˜è®¤å€¼æ˜¯ `2`ã€‚
* `q`ï¼šå¯é€‰ã€‚å†³å®šå‡ ä½•ä½“å°†ç»•ç€å…¶å†…éƒ¨åœ†ç¯æ—‹è½¬å¤šå°‘æ¬¡ï¼Œé»˜è®¤å€¼æ˜¯ `3`ã€‚

è¯­æ³•ç¤ºä¾‹ï¼š

```js
THREE.TorusKnotGeometry(radius, tube , radialSegments , tubularSegments , p,q);
```

`ğŸ˜­ å¤±è´¥`ï¼šæ²¡æ‰¾åˆ°èƒ½å¤Ÿæ§åˆ¶æ‰‹åŠ¨æ‰­æ›²ç¨‹åº¦çš„æ–¹æ³•ã€‚

![preview_2](./assets/images/preview_2.png)

### è¯•ç‚¼ä¸‰ï¼šTHREE.TubeGeometry

`THREE.TubeGeometry` æ²¿ç€ä¸€æ¡ä¸‰ç»´çš„æ ·æ¡æ›²çº¿æ‹‰ä¼¸å‡ºä¸€æ ¹ç®¡ã€‚ä½ å¯ä»¥æŒ‡å®šä¸€äº›å®šç‚¹æ¥å®šä¹‰è·¯å¾„ï¼Œç„¶åä½¿ç”¨ `THREE.TubeGeometry` åˆ›å»ºè¿™æ ¹ç®¡ã€‚ä¸»è¦å‚æ•°ï¼š

* `path`ï¼šè¯¥å±æ€§ç”¨ä¸€ä¸ª `THREE.SplineCurve3` å¯¹è±¡æ¥æŒ‡å®šç®¡é“åº”å½“éµå¾ªçš„è·¯å¾„ã€‚
* `segments`ï¼šè¯¥å±æ€§æŒ‡å®šæ„å»ºè¿™ä¸ªç®¡æ‰€ç”¨çš„åˆ†æ®µæ•°ã€‚é»˜è®¤å€¼ä¸º `64`.è·¯å¾„è¶Šé•¿ï¼ŒæŒ‡å®šçš„åˆ†æ®µæ•°åº”è¯¥è¶Šå¤šã€‚
* `radius`ï¼šè¯¥å±æ€§æŒ‡å®šç®¡çš„åŠå¾„ã€‚é»˜è®¤å€¼ä¸º `1`.
* `radiusSegments`ï¼šè¯¥å±æ€§æŒ‡å®šç®¡é“åœ†å‘¨çš„åˆ†æ®µæ•°ã€‚é»˜è®¤å€¼ä¸º `8`ï¼Œåˆ†æ®µæ•°è¶Šå¤šï¼Œç®¡é“çœ‹ä¸Šå»è¶Šåœ†ã€‚
* `closed`ï¼šå¦‚æœè¯¥å±æ€§è®¾ç½®ä¸º `true`ï¼Œç®¡é“çš„å¤´å’Œå°¾ä¼šè¿èµ·æ¥ï¼Œé»˜è®¤å€¼ä¸º `false`ã€‚

ä»£ç ç¤ºä¾‹

```js
// ...
var controls = new function () {
  // ç‚¹çš„ä½ç½®åæ ‡
  this.deafultpoints = [
    [0, 0.4, -0.4],
    [0.4, 0, 0],
    [0.4, 0.8, 0.4],
    [0, 0.4, 0.4],
    [-0.4, 0, 0],
    [-0.4, 0.8, -0.4],
    [0, 0.4, -0.4]
  ]
  this.segments = 64;
  this.radius = 1;
  this.radiusSegments = 8;
  this.closed = true;
  this.points = [];
  this.newPoints = function () {
    var points = [];
    for (var i = 0; i < controls.deafultpoints.length; i++) {
      var _x = controls.deafultpoints[i][0] * 22;
      var _y = controls.deafultpoints[i][1] * 22;
      var _z = controls.deafultpoints[i][2] * 22;
      points.push(new THREE.Vector3(_x, _y, _z));
    }
    controls.points = points;
    controls.redraw();
  };
  this.redraw = function () {
    redrawGeometryAndUpdateUI(gui, scene, controls, function() {
      return generatePoints(controls.points, controls.segments, controls.radius, controls.radiusSegments,
        controls.closed);
    });
  };
};
controls.newPoints();
function generatePoints(points, segments, radius, radiusSegments, closed) {
  if (spGroup) scene.remove(spGroup);
  spGroup = new THREE.Object3D();
  var material = new THREE.MeshBasicMaterial({ color: 0xff0000, transparent: false });
  points.forEach(function (point) {
    var spGeom = new THREE.SphereGeometry(0.1);
    var spMesh = new THREE.Mesh(spGeom, material);
    spMesh.position.copy(point);
    spGroup.add(spMesh);
  });
  scene.add(spGroup);
  return new THREE.TubeGeometry(new THREE.CatmullRomCurve3(points), segments, radius, radiusSegments, closed);
}
// ...
```

![preview_3](./assets/images/preview_3.png)

`ğŸ˜Š å‹‰å¼ºæˆåŠŸ`ï¼šä½†æ˜¯ç®¡é“è¿æˆçš„åœ†ç¯ä¸å¤Ÿåœ†ï¼Œå®ç°å®Œç¾çš„åœ†å¼§éœ€è¦ç²¾ç¡®çš„åæ ‡ï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°åæ ‡è®¡ç®—æ–¹æ³•ã€‚

### è¯•ç‚¼å››ï¼šBlender + Three.js

è™½ç„¶ä½¿ç”¨ `THREE.TubeGeometry` å¯ä»¥å‹‰å¼ºå®ç°ï¼Œä½†æ˜¯æ•ˆæœå¹¶ä¸å¥½ï¼Œè¦å®ç°åœ†æ»‘çš„ç¯ï¼Œéœ€è¦ä¸ºç®¡é“æ·»åŠ ç²¾ç¡®çš„æ‰­æ›²åœ†ç¯æ›²çº¿è·¯å¾„å‡½æ•°ã€‚ç”±äºæ•°å­¦èƒ½åŠ›æœ‰é™ `ğŸ¤•ï¸`ï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°æ‰­æ›²åœ†å¼§è·¯å¾„è®¡ç®—çš„æ–¹æ³•ã€‚å› æ­¤å†³å®šä»å»ºæ¨¡å±‚é¢è§£å†³ã€‚

`æˆåŠŸ ğŸ˜„`ï¼šä½†æ˜¯æ‰‹æ®‹çš„æˆ‘ä½¿ç”¨ `Blender` å»ºæ¨¡èŠ±è´¹äº†å¤§é‡çš„æ—¶é—´ `ğŸ’”`ã€‚

#### å»ºæ¨¡æ•™ç¨‹

é€› `Bç«™` çš„æ—¶å€™å‘ç°äº†è¿™ä½å¤§ä½¬å‘çš„å®è—è§†é¢‘ï¼Œåˆšå¥½è§£å†³äº†è‡ªå·±çš„éš¾é¢˜ã€‚

![bilibili](./assets/images/bilibili.png)

> `ğŸ¦` ä¼ é€é—¨ï¼š[ã€åŠ¨æ€è®¾è®¡æ•™ç¨‹ã€‘AE+blenderèƒ½æ€ä¹ˆç©ï¼Ÿè„¸ä¹¦å…ƒå®‡å®™MetaåŠ¨æ€logoå·²å®Œå…¨è§£æï¼Œ100%å­¦ä¼š](https://www.bilibili.com/video/BV1Bf4y1T7ce)

#### ç”¨Blenderå»ºæ¨¡

ä½¿ç”¨ `Blender` è¿›è¡Œå»ºæ¨¡ï¼Œå¹¶å¯¼å‡ºå¯æºå¸¦åŠ¨ç”»çš„ `fbx` æ ¼å¼ï¼Œå¯¼å‡ºçš„æ—¶å€™ä¸è¦å¿˜è®°å‹¾é€‰ `çƒ˜ç„™åŠ¨ç”»` é€‰é¡¹ã€‚

![blender](./assets/images/blender.png)

#### åŠ è½½ä¾èµ–

```html
<script src="./assets/libs/three.js"></script>
<script src="./assets/libs/loaders/FBXLoader.js"></script>
<script src="./assets/libs/inflate.min.js"></script>
<script src="./assets/libs/OrbitControls.js"></script>
<script src="./assets/libs/stats.js"></script>
```

#### åœºæ™¯åˆå§‹åŒ–

```js
var container, stats, controls, compose, camera, scene, renderer, light, clickableObjects = [], mixer, mixerArr = [], manMixer;
var clock = new THREE.Clock();
init();
animate();
function init() {
  container = document.createElement('div');
  document.body.appendChild(container);
  // åœºæ™¯
  scene = new THREE.Scene();
  scene.transparent = true;
  scene.fog = new THREE.Fog(0xa0a0a0, 200, 1000);
  // é€è§†ç›¸æœºï¼šè§†åœºã€é•¿å®½æ¯”ã€è¿‘é¢ã€è¿œé¢
  camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.set(0, 4, 16);
  camera.lookAt(new THREE.Vector3(0, 0, 0));
  // åŠçƒå…‰æºï¼šåˆ›å»ºå®¤å¤–æ•ˆæœæ›´åŠ è‡ªç„¶çš„å…‰æº
  light = new THREE.HemisphereLight(0xefefef);
  light.position.set(0, 20, 0);
  scene.add(light);
  // å¹³è¡Œå…‰
  light = new THREE.DirectionalLight(0x2d2d2d);
  light.position.set(0, 20, 10);
  light.castShadow = true;
  scene.add(light);
  // ç¯å¢ƒå…‰
  var ambientLight = new THREE.AmbientLight(0xffffff, .5);
  scene.add(ambientLight);
  // ç½‘æ ¼
  var grid = new THREE.GridHelper(100, 100, 0xffffff, 0xffffff);
  grid.position.set(0, -10, 0);
  grid.material.opacity = 0.3;
  grid.material.transparent = true;
  scene.add(grid);
  renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.outputEncoding = THREE.sRGBEncoding;
  renderer.setSize(window.innerWidth, window.innerHeight);
  // èƒŒæ™¯è‰²è®¾ç½®ä¸ºé€æ˜
  renderer.setClearAlpha(0);
  // å¼€å¯é˜´å½±
  renderer.shadowMap.enabled = true;
  container.appendChild(renderer.domElement);
  // æ·»åŠ é•œå¤´æ§åˆ¶å™¨
  controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.target.set(0, 0, 0);
  controls.update();
  window.addEventListener('resize', onWindowResize, false);
  // åˆå§‹åŒ–æ€§èƒ½æ’ä»¶
  stats = new Stats();
  container.appendChild(stats.dom);
}
// å±å¹•ç¼©æ”¾
function onWindowResize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}
```

> `ğŸ“Œ` æƒ³äº†è§£åœºæ™¯åˆå§‹åŒ–çš„è¯¦ç»†æµç¨‹ï¼Œå¯é˜…è¯»æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« [ã€Šä½¿ç”¨three.jså®ç°ç‚«é…·çš„é…¸æ€§é£æ ¼3Dé¡µé¢ã€‹](https://juejin.cn/post/7012996721693163528)ã€‚

#### åŠ è½½Logoæ¨¡å‹

ä½¿ç”¨ `FBXLoader` åŠ è½½æ¨¡å‹ï¼Œå¹¶è®¾ç½®æ¨¡å‹çš„ä½ç½®å’Œå¤§å°ã€‚

```js
var loader = new THREE.FBXLoader();
loader.load('assets/models/meta.fbx', function (mesh) {
  mesh.traverse(function (child) {
    if (child.isMesh) {
      child.castShadow = true;
      child.receiveShadow = true;
    }
  });
  mesh.rotation.y = Math.PI / 2;
  mesh.position.set(0, 1, 0);
  mesh.scale.set(0.05, 0.05, 0.05);
  scene.add(mesh);
});
```

#### æ·»åŠ æè´¨

æœ¬æ–‡ `Logo` ä½¿ç”¨çš„æ˜¯ `MeshPhysicalMaterial`æè´¨ï¼Œå®ƒæ˜¯ä¸€ç§ `PBR` ç‰©ç†æè´¨ï¼Œå¯ä»¥æ›´å¥½çš„æ¨¡æ‹Ÿå…‰ç…§è®¡ç®—ï¼Œç›¸æ¯”è¾ƒé«˜å…‰ç½‘æ ¼æè´¨ `MeshPhongMaterial` æ¸²æŸ“æ•ˆæœæ›´é€¼çœŸã€‚ä½¿ç”¨ `THREE.TextureLoader` ä¸ºæè´¨æ·»åŠ  `map` å±æ€§æ¥åŠ è½½æ¨¡å‹è´´å›¾ã€‚ä¸‹å›¾æ˜¯é‡‘å±è´¨æ„Ÿçš„çº¹ç†è´´å›¾ã€‚

![metal](./assets/images/metal.png)

```js
var texLoader = new THREE.TextureLoader();
loader.load('assets/models/meta.fbx', function (mesh) {
  mesh.traverse(function (child) {
    if (child.isMesh) {
      if (child.name === 'è´å¡å°”åœ†') {
        child.material = new THREE.MeshPhysicalMaterial({
          map: texLoader.load("./assets/images/metal.png"),
          metalness: .2,
          roughness: 0.1,
          exposure: 0.4
        });
      }
    }
  });
})
```

#### æ·»åŠ åŠ¨ç”»

* `AnimationMixer` å¯¹è±¡æ˜¯åœºæ™¯ä¸­ç‰¹å®šå¯¹è±¡çš„åŠ¨ç”»æ’­æ”¾å™¨ã€‚å½“åœºæ™¯ä¸­çš„å¤šä¸ªå¯¹è±¡ç‹¬ç«‹åŠ¨ç”»æ—¶ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªå¯¹è±¡ä½¿ç”¨ä¸€ä¸ª `AnimationMixer`ã€‚
* `AnimationMixer` å¯¹è±¡çš„ `clipAction` æ–¹æ³•ç”Ÿæˆå¯ä»¥æ§åˆ¶æ‰§è¡ŒåŠ¨ç”»çš„å®ä¾‹ã€‚

```js
loader.load('assets/models/meta.fbx', function (mesh) {
  mesh.animations.map(item => {
    mesh.traverse(child => {
      // å› ä¸ºæ¨¡å‹ä¸­æœ‰å¤šä¸ªç‰©ä½“ï¼Œå¹¶ä¸”å„è‡ªæœ‰ä¸åŒåŠ¨ç”»ï¼Œç¤ºä¾‹ä¸­åªä¸ºè´å¡å°”åœ†è¿™ä¸ªç½‘æ ¼æ·»åŠ åŠ¨ç”»
      if (child.name === 'è´å¡å°”åœ†') {
        let mixer = new THREE.AnimationMixer(child);
        mixerArr.push(mixer);
        let animationClip = item;
        animationClip.duration = 8;
        let clipAction = mixer.clipAction(animationClip).play();
        animationClip = clipAction.getClip();
      }
    })
  })
});
```

æ·»åŠ åŠ¨ç”»ä¹‹åï¼Œä¸è¦å¿˜äº†è¦åœ¨ `requestAnimationFrame` ä¸­æ›´æ–°åŠ¨ç”»ã€‚

```js
function animate() {
  renderer.render(scene, camera);
  // è·å¾—å‰åä¸¤æ¬¡æ‰§è¡Œè¯¥æ–¹æ³•çš„æ—¶é—´é—´éš”
  let time = clock.getDelta();
  // æ›´æ–°logoåŠ¨ç”»
  mixerArr.map(mixer => {
    mixer && mixer.update(time);
  });
  // æ›´æ–°äººç‰©åŠ¨ç”»
  manMixer && manMixer.update(time);
  stats.update();
  requestAnimationFrame(animate);
}
```

#### å±•ç¤ºåŠ è½½è¿›åº¦

`FBXLoader` åŒæ—¶è¿”å›ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼Œç”¨æ¥å±•ç¤ºæ¨¡å‹åŠ è½½è¿›ç¨‹å±•ç¤ºä»¥åŠåŠ è½½å¤±è´¥çš„é€»è¾‘å®ç°ã€‚

```html
<div class="loading" id="loading">
  <p class="text">åŠ è½½è¿›åº¦<span id="progress">0%</span></p>
<div>
```

```js
var loader = new THREE.FBXLoader();
loader.load('assets/models/meta.fbx', mesh => {
}, res => {
  // åŠ è½½è¿›ç¨‹
  let progress = (res.loaded / res.total * 100).toFixed(0);
  document.getElementById('progress').innerText = progress;
  if (progress === 100) {
    document.getElementById('loading').style.display = 'none';
  }
}, err => {
  // åŠ è½½å¤±è´¥
  console.log(err)
});
```

å®ç°æ•ˆæœ

![loading](./assets/images/loading.gif)

#### ç‚¹å‡»æ›´æ¢æè´¨

ç›‘å¬é¡µé¢çš„ç‚¹å‡»äº‹ä»¶ï¼Œé€šè¿‡ `HREE.Raycaster` æ‹¿åˆ°å½“å‰ç‚¹å‡»å¯¹è±¡ï¼Œä¸ºäº†å±•ç¤ºä¾‹å­ï¼Œæˆ‘ä¸ºç‚¹å‡»å¯¹è±¡æ›´æ¢äº†ä¸€ç§æè´¨ `THREE.MeshStandardMaterial`ï¼Œå¹¶èµ‹äºˆå®ƒéšæœºçš„ `color` é¢œè‰²ã€`metalness` é‡‘å±è´¨æ„Ÿä»¥åŠ `roughness` ç²—ç³™ç¨‹åº¦ã€‚

```js
//å£°æ˜raycasterå’Œmouseå˜é‡
var raycaster = new THREE.Raycaster();
var mouse = new THREE.Vector2();
function onMouseClick(event) {
  // é€šè¿‡é¼ æ ‡ç‚¹å‡»çš„ä½ç½®è®¡ç®—å‡ºraycasteræ‰€éœ€è¦çš„ç‚¹çš„ä½ç½®ï¼Œä»¥å±å¹•ä¸­å¿ƒä¸ºåŸç‚¹ï¼Œå€¼çš„èŒƒå›´ä¸º-1åˆ°1.
  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
  mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
  // é€šè¿‡é¼ æ ‡ç‚¹çš„ä½ç½®å’Œå½“å‰ç›¸æœºçš„çŸ©é˜µè®¡ç®—å‡ºraycaster
  raycaster.setFromCamera(mouse, camera);
  // è·å–raycasterç›´çº¿å’Œæ‰€æœ‰æ¨¡å‹ç›¸äº¤çš„æ•°ç»„é›†åˆ
  let intersects = raycaster.intersectObjects(clickableObjects);
  if (intersects.length > 0) {
    console.log(intersects[0].object)
    let selectedObj = intersects[0].object;
    selectedObj.material = new THREE.MeshStandardMaterial({
      color: `#${Math.random().toString(16).slice(-6)}`,
      metalness: Math.random(),
      roughness: Math.random()
    })
  }
}
window.addEventListener('click', onMouseClick, false);
```

![material](./assets/images/material.gif)

> `ğŸ“Œ` æ›´å¤šå…³äºç½‘æ ¼æè´¨çš„çŸ¥è¯†ï¼Œå¯å‚è€ƒæ–‡ç« æœ«å°¾çš„é“¾æ¥ã€‚

#### åŠ è½½äººç‰©æ¨¡å‹

äººç‰©æ¨¡å‹çš„åŠ è½½æµç¨‹å’Œ `Logo` æ¨¡å‹åŠ è½½æµç¨‹æ˜¯ä¸€æ ·çš„ã€‚æˆ‘æ·»åŠ äº†ä¸€ä¸ªæ­£åœ¨æ–½å±•**é¾Ÿæ´¾æ°”åŠŸ**çš„äººç‰©ï¼Œæ²¡æƒ³åˆ°ä¸ `Logo` æ¨¡å‹çš„æ—‹è½¬åŠ¨ç”»éå¸¸å¥‘åˆ `ğŸ˜‚` ã€‚

```js
loader.load('assets/models/man.fbx', function (mesh) {
  mesh.traverse(function (child) {
    if (child.isMesh) {
      child.castShadow = true;
      child.receiveShadow = true;
    }
  });
  mesh.rotation.y = Math.PI / 2;
  mesh.position.set(-14, -8.4, -3);
  mesh.scale.set(0.085, 0.085, 0.085);
  scene.add(mesh);
  manMixer = new THREE.AnimationMixer(mesh);
  let animationClip = mesh.animations[0];
  let clipAction = manMixer.clipAction(animationClip).play();
  animationClip = clipAction.getClip();
}, res => {
  let progress = (res.loaded / res.total * 100).toFixed(0);
  document.getElementById('progress').innerText = progress + '%';
  if (Number(progress) === 100) {
    document.getElementById('loading').style.display = 'none';
  }
}, err => {
  console.log(err)
});
```

æœ¬æ–‡ç¤ºä¾‹äººç‰©æ¨¡å‹æ¥æºäº[mixamo.com](https://www.mixamo.com)ï¼Œè¯¥ç½‘ç«™æœ‰æœ‰ä¸Šç™¾ç§äººç‰©å’Œä¸Šåƒç§åŠ¨ä½œå¯è‡ªç”±ç»„åˆï¼Œ`å…è´¹` ä¸‹è½½ã€‚å¤§å®¶å¯ä»¥æŒ‘é€‰è‡ªå·±å–œæ¬¢çš„äººç‰©å’ŒåŠ¨ç”»åŠ¨ä½œæ¥ç»ƒä¹  `Three.js`ã€‚

![download](./assets/images/download.png)

## æ€»ç»“

æœ¬æ–‡ä¸­æ¶‰åŠåˆ°çš„ä¸»è¦çŸ¥è¯†ç‚¹åŒ…æ‹¬ï¼š

* `THREE.TorusGeometry`ï¼šåœ†ç¯ã€‚
* `THREE.TorusKnotGeometry`ï¼šç¯é¢æ‰­ç»“ã€‚
* `THREE.TubeGeometry`ï¼šç®¡é“ã€‚
* `Blender`: å»ºæ¨¡ã€‚
* `FBXLoader`: åŠ è½½æ¨¡å‹ï¼Œæ˜¾ç¤ºåŠ è½½è¿›åº¦ã€‚
* `TextureLoader`ï¼šåŠ è½½æè´¨ã€‚
* `THREE.AnimationMixer`ï¼šåŠ è½½åŠ¨ç”»ã€‚
* `THREE.Raycaster`ï¼šæ•è·ç‚¹å‡»æ¨¡å‹ã€‚

> `ğŸ”—` å®Œæ•´ä»£ç ï¼š[https://github.com/dragonir/3d-meta-logo](https://github.com/dragonir/3d-meta-logo)

## å‚è€ƒèµ„æ–™

* [1]. [ä½¿ç”¨three.jså®ç°ç‚«é…·çš„é…¸æ€§é£æ ¼3Dé¡µé¢](https://juejin.cn/post/7012996721693163528)
* [2]. [ThreeJsè®¤è¯†æè´¨](https://juejin.cn/post/6844903903318949895#heading-12)
* [3]. [Threeä¹‹Animationåˆå°è±¡](https://zhuanlan.zhihu.com/p/419797361)
* [4]. [ä»€ä¹ˆæ˜¯å…ƒå®‡å®™ï¼Ÿ](https://zhuanlan.zhihu.com/p/392257538)

> ä½œè€…ï¼šdragonir  æœ¬æ–‡åœ°å€ï¼šhttps://github.com/dragonir/3d-meta-logo